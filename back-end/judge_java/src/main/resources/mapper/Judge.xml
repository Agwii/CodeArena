<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.codearena.judge.mapper.JudgeMapper">

    <resultMap id="judgeProblemInfoMap" type="judgeProblemInfoDto">
        <result column="problem_time" property="problemTime"/>
        <result column="problem_mem" property="problemMem"/>
    </resultMap>

    <select id="getTestCase" parameterType="string" resultType="testCaseDto">
        select input, output, tid
        from ps_testcase
        where problem_id=#{problemId};
    </select>

    <select id="getProblemInfo" parameterType="string" resultMap="judgeProblemInfoMap">
        select problem_time, problem_mem
        from ps_list
        where problem_id=#{problemId};
    </select>

    <update id="updatePsSubmit" parameterType="judgeValidateResultDto">
        update ps_submit
        set submit_status="#{msg}", time_complexity="#{time}", tid="#{wrongTestCaseNo}"
        where submit_no="#{submitNo}";
    </update>

</mapper>